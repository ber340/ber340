<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Site Ba≈ülƒ±ƒüƒ±</title>
    <style>
        /* KARANLIK TEMA */
        :root {
            --bg-color: #0a0a0a;
            --text-color: #e0e0e0;
            --border-color: #333;
            --hover-color: #2a2a2a;
            --accent-color: #64ffda;
            --button-bg: #1a1a1a;
            --modal-bg: #1a1a1a;
        }
        
        body, .content-container, .header, .tree, .small, .sublink_small, .sublink_small:visited {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
        }
        
        body, .header, .tree {
            font-family: 'Courier New', monospace;
        }
        
        .content-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            word-wrap: break-word;
        }
        
        .header, .tree {
            white-space: pre;
            margin-top: 10px;
        }
        
        .header {
            font-size: 14px;
        }
        
        .tree {
            line-height: 1.3;
            font-size: 16px;
        }
        
        .small, .sublink_small {
            font-size: 14px;
        }
        
        .sublink_small {
            color: var(--accent-color);
            text-decoration: none;
        }
        
        .sublink_small:visited {
            color: #888;
        }
        
        .sublink_small:hover {
            text-decoration: underline;
        }
        
        /* D√úZENLEME KONTROLLERƒ∞ */
        .edit-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--button-bg);
            border: 1px solid var(--border-color);
            padding: 12px;
            border-radius: 4px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .edit-btn {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            background: var(--button-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 6px 12px;
            cursor: pointer;
            margin: 4px 2px;
            border-radius: 3px;
            transition: all 0.2s;
        }
        
        .edit-btn:hover {
            background: var(--hover-color);
            border-color: var(--accent-color);
        }
        
        .edit-btn.danger {
            border-color: #ff6b6b;
            color: #ff6b6b;
        }
        
        .edit-btn.danger:hover {
            background: rgba(255, 107, 107, 0.1);
        }
        
        /* ƒ∞√áERƒ∞K G√ñR√úNT√úLEME ALANI */
        .content-view {
            margin-top: 30px;
            padding: 25px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            background: var(--button-bg);
        }
        
        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .content-header h2 {
            margin: 0;
            color: var(--accent-color);
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-btn:hover {
            background: var(--hover-color);
        }
        
        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: var(--modal-bg);
            padding: 25px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .modal h3 {
            color: var(--accent-color);
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        .edit-input, .edit-textarea {
            font-family: 'Courier New', monospace;
            background: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .edit-textarea {
            height: 200px;
            resize: vertical;
        }
        
        /* MOBƒ∞L UYUMLULUK */
        @media (max-width: 768px) {
            .content-container {
                padding: 15px;
            }
            
            .tree {
                font-size: 14px;
            }
            
            .edit-controls {
                position: static;
                margin-bottom: 20px;
                text-align: center;
            }
            
            .content-view {
                padding: 15px;
                margin-top: 20px;
            }
            
            .modal-content {
                padding: 20px;
                width: 95%;
            }
            
            .edit-controls {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .edit-btn {
                margin: 5px;
                padding: 8px 16px;
            }
        }
        
        @media (max-width: 480px) {
            .content-container {
                padding: 10px;
            }
            
            .tree {
                font-size: 13px;
                line-height: 1.4;
            }
            
            .content-view {
                padding: 12px;
            }
            
            .edit-controls {
                padding: 10px;
            }
            
            .edit-btn {
                font-size: 11px;
                padding: 6px 12px;
            }
        }
        
        /* Y√úKLEME ANƒ∞MASYONU */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .tree, .content-view, .modal-content {
            animation: fadeIn 0.3s ease-in;
        }
        
        /* TIKLANABƒ∞Lƒ∞R BA≈ûLIKLAR */
        .clickable-title {
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .clickable-title:hover {
            color: var(--accent-color);
        }
    </style>
</head>
<body>
<div class="content-container">
    <!-- D√úZENLEME KONTROLLERƒ∞ -->
    <div class="edit-controls">
        <button class="edit-btn" id="toggleEditBtn">D√ºzenleme Modu</button>
        <button class="edit-btn" id="addCategoryBtn" style="display: none;">+ Ana Ba≈ülƒ±k</button>
    </div>

    <!-- AƒûA√á YAPISI -->
    <div class="tree" id="treeContent">
        <!-- ƒ∞√ßerik buraya eklenecek -->
    </div>
    
    <!-- ƒ∞√áERƒ∞K G√ñR√úNT√úLEME ALANI -->
    <div class="content-view" id="contentView" style="display: none;">
        <div class="content-header">
            <h2 id="contentTitle"></h2>
            <button class="close-btn" onclick="hideContentView()">√ó</button>
        </div>
        <div id="contentBody"></div>
    </div>
    
    <!-- D√úZENLEME MODALI -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h3>ƒ∞√ßerik D√ºzenle</h3>
            <input type="text" id="editTitle" class="edit-input" placeholder="Ba≈ülƒ±k">
            <textarea id="editContent" class="edit-textarea" placeholder="ƒ∞√ßerik"></textarea>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="edit-btn" onclick="saveContent()">Kaydet</button>
                <button class="edit-btn" onclick="closeModal()">ƒ∞ptal</button>
                <button class="edit-btn danger" onclick="deleteContent()">Sil</button>
            </div>
        </div>
    </div>
</div>

<script>
    // üì¶ VERƒ∞ YAPISI
    let siteData = JSON.parse(localStorage.getItem('siteData')) || [
        {
            id: 1,
            title: "ilk-baslik.html",
            content: "Bu ilk ba≈ülƒ±ƒüƒ±n i√ßeriƒüi.\n\nBuraya istediƒüiniz her ≈üeyi yazabilirsiniz.\n\n- Madde 1\n- Madde 2\n- Madde 3",
            children: [
                { id: 11, title: "alt-baslik-1.html", content: "Alt ba≈ülƒ±k 1 i√ßeriƒüi" },
                { id: 12, title: "alt-baslik-2.html", content: "Alt ba≈ülƒ±k 2 i√ßeriƒüi" }
            ]
        },
        {
            id: 2,
            title: "ikinci-baslik.html",
            content: "ƒ∞kinci ba≈ülƒ±k i√ßeriƒüi burada.",
            children: []
        }
    ];
    
    let editMode = false;
    let currentEditingId = null;
    let currentViewingId = null;
    
    // üéØ DOM ELEMENTLERƒ∞
    const treeContent = document.getElementById('treeContent');
    const contentView = document.getElementById('contentView');
    const contentTitle = document.getElementById('contentTitle');
    const contentBody = document.getElementById('contentBody');
    const toggleEditBtn = document.getElementById('toggleEditBtn');
    const addCategoryBtn = document.getElementById('addCategoryBtn');
    
    // üå≥ AƒûA√á YAPISINI OLU≈ûTUR
    function renderTree() {
        let html = '';
        
        siteData.forEach((category, index) => {
            // Ana ba≈ülƒ±k
            html += `|‚Äî‚Äî<span class="clickable-title" onclick="toggleContent(${category.id}, null)">${category.title}</span>`;
            
            if (editMode) {
                html += ` <button class="edit-btn" onclick="editItem(${category.id}, null)" title="D√ºzenle" style="font-size:11px; padding:2px 6px;">‚úé</button>`;
                html += ` <button class="edit-btn danger" onclick="deleteItem(${category.id}, null)" title="Sil" style="font-size:11px; padding:2px 6px;">√ó</button>`;
                html += ` <button class="edit-btn" onclick="addSubItem(${category.id})" title="Alt ba≈ülƒ±k ekle" style="font-size:11px; padding:2px 6px;">+</button>`;
            }
            
            html += '\n';
            
            // Alt ba≈ülƒ±klar
            category.children.forEach((child, childIndex) => {
                html += `|&nbsp;&nbsp;|‚Äî‚Äî<span class="clickable-title" onclick="toggleContent(${category.id}, ${child.id})">${child.title}</span>`;
                
                if (editMode) {
                    html += ` <button class="edit-btn" onclick="editItem(${category.id}, ${child.id})" title="D√ºzenle" style="font-size:11px; padding:2px 6px;">‚úé</button>`;
                    html += ` <button class="edit-btn danger" onclick="deleteItem(${category.id}, ${child.id})" title="Sil" style="font-size:11px; padding:2px 6px;">√ó</button>`;
                }
                
                html += '\n';
            });
            
            if (category.children.length === 0 && index !== siteData.length - 1) {
                html += '|\n';
            }
        });
        
        treeContent.innerHTML = html;
        localStorage.setItem('siteData', JSON.stringify(siteData));
    }
    
    // üëÅÔ∏è ƒ∞√áERƒ∞ƒûƒ∞ A√á/KAPA
    function toggleContent(categoryId, itemId) {
        // Aynƒ± i√ßeriƒüi tekrar tƒ±kladƒ±ysa kapat
        if (currentViewingId && currentViewingId.categoryId === categoryId && currentViewingId.itemId === itemId) {
            hideContentView();
            currentViewingId = null;
            return;
        }
        
        currentViewingId = { categoryId, itemId };
        showContent(categoryId, itemId);
    }
    
    // üìÑ ƒ∞√áERƒ∞ƒûƒ∞ G√ñSTER
    function showContent(categoryId, itemId) {
        let title = '';
        let content = '';
        
        if (itemId === null) {
            // Ana ba≈ülƒ±k i√ßeriƒüi
            const category = siteData.find(c => c.id === categoryId);
            title = category.title;
            content = category.content;
        } else {
            // Alt ba≈ülƒ±k i√ßeriƒüi
            const category = siteData.find(c => c.id === categoryId);
            const item = category.children.find(c => c.id === itemId);
            title = item.title;
            content = item.content;
        }
        
        contentTitle.textContent = title;
        contentBody.textContent = content;
        contentView.style.display = 'block';
        
        // ƒ∞√ßeriƒüin g√∂r√ºn√ºr olmasƒ±nƒ± saƒüla
        contentView.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
    
    // üôà ƒ∞√áERƒ∞K G√ñR√úN√úM√úN√ú Gƒ∞ZLE
    function hideContentView() {
        contentView.style.display = 'none';
        currentViewingId = null;
    }
    
    // üîÑ D√úZENLEME MODUNU A√á/KAPA
    function toggleEditMode() {
        editMode = !editMode;
        toggleEditBtn.textContent = editMode ? 'D√ºzenlemeyi Bitir' : 'D√ºzenleme Modu';
        addCategoryBtn.style.display = editMode ? 'inline-block' : 'none';
        renderTree();
    }
    
    toggleEditBtn.addEventListener('click', toggleEditMode);
    
    // ‚ûï YENƒ∞ ANA BA≈ûLIK EKLE
    function addNewCategory() {
        const title = prompt('Yeni ana ba≈ülƒ±k adƒ±:', 'yeni-baslik.html');
        if (!title) return;
        
        const newId = siteData.length > 0 ? Math.max(...siteData.map(c => c.id)) + 1 : 1;
        siteData.push({
            id: newId,
            title: title.endsWith('.html') ? title : title + '.html',
            content: 'Bu ba≈ülƒ±ƒüƒ±n i√ßeriƒüini buraya yazƒ±n...',
            children: []
        });
        
        renderTree();
        // Yeni ba≈ülƒ±ƒüƒ± a√ß
        showContent(newId, null);
    }
    
    addCategoryBtn.addEventListener('click', addNewCategory);
    
    // ‚ûï ALT BA≈ûLIK EKLE
    function addSubItem(categoryId) {
        const title = prompt('Yeni alt ba≈ülƒ±k adƒ±:', 'alt-baslik.html');
        if (!title) return;
        
        const category = siteData.find(c => c.id === categoryId);
        const newId = category.children.length > 0 ? 
            Math.max(...category.children.map(c => c.id)) + 1 : 1;
        
        category.children.push({
            id: newId,
            title: title.endsWith('.html') ? title : title + '.html',
            content: 'Bu alt ba≈ülƒ±ƒüƒ±n i√ßeriƒüini buraya yazƒ±n...'
        });
        
        renderTree();
    }
    
    // ‚úèÔ∏è ƒ∞√áERƒ∞K D√úZENLE
    function editItem(categoryId, itemId) {
        currentEditingId = { categoryId, itemId };
        const modal = document.getElementById('editModal');
        const editTitle = document.getElementById('editTitle');
        const editContent = document.getElementById('editContent');
        
        let title = '';
        let content = '';
        
        if (itemId === null) {
            // Ana ba≈ülƒ±k d√ºzenle
            const category = siteData.find(c => c.id === categoryId);
            title = category.title;
            content = category.content;
        } else {
            // Alt ba≈ülƒ±k d√ºzenle
            const category = siteData.find(c => c.id === categoryId);
            const item = category.children.find(c => c.id === itemId);
            title = item.title;
            content = item.content;
        }
        
        editTitle.value = title;
        editContent.value = content;
        modal.style.display = 'flex';
        editTitle.focus();
    }
    
    // üíæ ƒ∞√áERƒ∞K KAYDET
    function saveContent() {
        const editTitle = document.getElementById('editTitle');
        const editContent = document.getElementById('editContent');
        
        if (!editTitle.value.trim()) {
            alert('Ba≈ülƒ±k bo≈ü olamaz!');
            return;
        }
        
        const { categoryId, itemId } = currentEditingId;
        
        if (itemId === null) {
            // Ana ba≈ülƒ±k g√ºncelle
            const category = siteData.find(c => c.id === categoryId);
            category.title = editTitle.value.endsWith('.html') ? editTitle.value : editTitle.value + '.html';
            category.content = editContent.value;
        } else {
            // Alt ba≈ülƒ±k g√ºncelle
            const category = siteData.find(c => c.id === categoryId);
            const item = category.children.find(c => c.id === itemId);
            item.title = editTitle.value.endsWith('.html') ? editTitle.value : editTitle.value + '.html';
            item.content = editContent.value;
        }
        
        closeModal();
        renderTree();
        
        // Eƒüer bu i√ßerik g√∂r√ºnt√ºleniyorsa g√ºncelle
        if (currentViewingId && currentViewingId.categoryId === categoryId && currentViewingId.itemId === itemId) {
            showContent(categoryId, itemId);
        }
    }
    
    // üóëÔ∏è ƒ∞√áERƒ∞K Sƒ∞L
    function deleteItem(categoryId, itemId) {
        const itemType = itemId === null ? 'ana ba≈ülƒ±ƒüƒ±' : 'alt ba≈ülƒ±ƒüƒ±';
        
        if (!confirm(`Bu ${itemType} silmek istediƒüinize emin misiniz?`)) return;
        
        if (itemId === null) {
            // Ana ba≈ülƒ±k sil
            if (siteData.length <= 1) {
                alert('En az bir ana ba≈ülƒ±k kalmalƒ±!');
                return;
            }
            siteData = siteData.filter(c => c.id !== categoryId);
        } else {
            // Alt ba≈ülƒ±k sil
            const category = siteData.find(c => c.id === categoryId);
            category.children = category.children.filter(c => c.id !== itemId);
        }
        
        renderTree();
        
        // Eƒüer silinen i√ßerik g√∂r√ºnt√ºleniyorsa kapat
        if (currentViewingId && currentViewingId.categoryId === categoryId && currentViewingId.itemId === itemId) {
            hideContentView();
        }
    }
    
    // üóëÔ∏è MODAL ƒ∞√áƒ∞N Sƒ∞LME FONKSƒ∞YONU
    function deleteContent() {
        const { categoryId, itemId } = currentEditingId;
        closeModal();
        deleteItem(categoryId, itemId);
    }
    
    // ‚ùå MODALI KAPAT
    function closeModal() {
        document.getElementById('editModal').style.display = 'none';
        currentEditingId = null;
    }
    
    // üöÄ SAYFA Y√úKLENDƒ∞ƒûƒ∞NDE
    window.onload = function() {
        renderTree();
        console.log('‚úÖ Site hazƒ±r!');
        console.log('üìÅ Ana ba≈ülƒ±k sayƒ±sƒ±:', siteData.length);
        console.log('üíæ Veriler localStorage\'da saklanƒ±yor');
        
        // D√ºzenleme modu kapalƒ±yken +Ana Ba≈ülƒ±k butonunu gizle
        addCategoryBtn.style.display = 'none';
        
        // Modal dƒ±≈üƒ±na tƒ±klayƒ±nca kapat
        document.getElementById('editModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    };
</script>
</body>
</html>
