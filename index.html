<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Site BaÅŸlÄ±ÄŸÄ±</title>
    <style>
        body, .content-container, .header, .tree, .small, .sublink_small, .sublink_small:visited {
            margin: 0;
            padding: 0;
        }
        body, .header, .tree {
            font-family: monospace;
        }
        .content-container {
            max-width: 800px;
            margin-left: 1%;
            padding: 20px;
            word-wrap: break-word;
        }
        .header, .tree {
            white-space: pre;
            margin-top: 10px;
            margin-left: 1%;
        }
        .header {
            font-size: 14px;
        }
        .tree {
            line-height: 1;
            font-size: 18px;
        }
        .small, .sublink_small {
            font-size: 14px;
        }
        .sublink_small {
            color: black;
            text-decoration: none;
        }
        .sublink_small:visited {
            color: gray;
        }
        .sublink_small:hover {
            text-decoration: underline;
        }
        
        /* DÃ¼zenleme Kontrolleri */
        .edit-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            border: 1px solid #ccc;
            padding: 10px;
            z-index: 1000;
        }
        .edit-btn {
            font-family: monospace;
            font-size: 12px;
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 5px 10px;
            cursor: pointer;
            margin: 2px;
        }
        .edit-btn:hover {
            background: #e5e5e5;
        }
        .edit-input {
            font-family: monospace;
            font-size: 14px;
            width: 100%;
            padding: 2px;
            margin: 2px 0;
        }
        .edit-textarea {
            font-family: monospace;
            font-size: 14px;
            width: 100%;
            height: 200px;
            padding: 5px;
            margin: 5px 0;
        }
        
        /* Ä°Ã§erik GÃ¶rÃ¼ntÃ¼leme AlanÄ± */
        .content-view {
            margin-top: 20px;
            padding: 20px;
            border-top: 1px solid #eee;
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
<div class="content-container">
    <!-- DÃ¼zenleme Kontrolleri -->
    <div class="edit-controls">
        <button class="edit-btn" onclick="toggleEditMode()">DÃ¼zenleme Modu</button>
        <button class="edit-btn" onclick="addNewCategory()">+ Ana BaÅŸlÄ±k</button>
        <button class="edit-btn" onclick="exportData()">ğŸ“¥ Veriyi Ä°ndir</button>
        <button class="edit-btn" onclick="importData()">ğŸ“¤ Veri YÃ¼kle</button>
    </div>

    <!-- Ana Ä°Ã§erik -->
    <div class="tree" id="treeContent">
        <!-- AÄŸaÃ§ yapÄ±sÄ± buraya eklenecek -->
    </div>
    
    <!-- Ä°Ã§erik GÃ¶rÃ¼ntÃ¼leme AlanÄ± -->
    <div class="content-view" id="contentView" style="display: none;">
        <button class="edit-btn" onclick="hideContentView()">âœ• Kapat</button>
        <div id="contentDisplay"></div>
    </div>
    
    <!-- Ä°Ã§erik DÃ¼zenleme ModalÄ± -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h3 style="font-family: monospace;">Ä°Ã§erik DÃ¼zenle</h3>
            <input type="text" id="editTitle" class="edit-input" placeholder="BaÅŸlÄ±k">
            <textarea id="editContent" class="edit-textarea" placeholder="Ä°Ã§erik"></textarea>
            <div style="margin-top: 10px;">
                <button class="edit-btn" onclick="saveContent()">Kaydet</button>
                <button class="edit-btn" onclick="closeModal()">Ä°ptal</button>
                <button class="edit-btn" onclick="deleteContent()" style="background: #ffebee;">Sil</button>
            </div>
        </div>
    </div>
    
    <!-- Yeni Ã–ÄŸe ModalÄ± -->
    <div class="modal" id="newItemModal">
        <div class="modal-content">
            <h3 style="font-family: monospace;">Yeni Ã–ÄŸe Ekle</h3>
            <select id="itemType" class="edit-input" onchange="toggleParentSelect()">
                <option value="category">Ana BaÅŸlÄ±k</option>
                <option value="subitem">Alt BaÅŸlÄ±k</option>
            </select>
            <select id="parentCategory" class="edit-input" style="display: none;">
                <!-- Ana baÅŸlÄ±klar buraya eklenecek -->
            </select>
            <input type="text" id="newItemTitle" class="edit-input" placeholder="BaÅŸlÄ±k">
            <button class="edit-btn" onclick="addItem()">Ekle</button>
            <button class="edit-btn" onclick="closeNewItemModal()">Ä°ptal</button>
        </div>
    </div>
</div>

<script>
    // ğŸ“¦ Veri YapÄ±sÄ±
    let siteData = JSON.parse(localStorage.getItem('siteData')) || [
        {
            id: 1,
            title: "ilk-baslik.html",
            content: "Bu ilk baÅŸlÄ±ÄŸÄ±n iÃ§eriÄŸi.\n\nBuraya istediÄŸiniz her ÅŸeyi yazabilirsiniz.\n\n- Madde 1\n- Madde 2\n- Madde 3",
            children: [
                { id: 11, title: "alt-baslik-1.html", content: "Alt baÅŸlÄ±k 1 iÃ§eriÄŸi" },
                { id: 12, title: "alt-baslik-2.html", content: "Alt baÅŸlÄ±k 2 iÃ§eriÄŸi" }
            ]
        },
        {
            id: 2,
            title: "ikinci-baslik.html",
            content: "Ä°kinci baÅŸlÄ±k iÃ§eriÄŸi burada.",
            children: []
        }
    ];
    
    let editMode = false;
    let currentEditingId = null;
    let currentParentId = null;
    
    // ğŸŒ³ AÄŸaÃ§ YapÄ±sÄ±nÄ± Render Et
    function renderTree() {
        const treeContent = document.getElementById('treeContent');
        let html = '';
        
        siteData.forEach((category, index) => {
            // Ana baÅŸlÄ±k
            html += `|â€”â€”<a href="#" onclick="viewContent(${category.id}, null)" class="small">${category.title}</a>\n`;
            
            if (editMode) {
                html += ` <button class="edit-btn" onclick="editContent(${category.id}, null)" style="font-size:10px; padding:1px 4px;">âœ</button>`;
                html += ` <button class="edit-btn" onclick="deleteCategory(${category.id})" style="font-size:10px; padding:1px 4px; background:#ffebee;">âœ•</button>`;
                html += ` <button class="edit-btn" onclick="addSubItem(${category.id})" style="font-size:10px; padding:1px 4px;">+</button>\n`;
            } else {
                html += '\n';
            }
            
            // Alt baÅŸlÄ±klar
            category.children.forEach((child, childIndex) => {
                html += `|&nbsp;&nbsp;|â€”â€”<a href="#" onclick="viewContent(${category.id}, ${child.id})" class="sublink_small">${child.title}</a>`;
                
                if (editMode) {
                    html += ` <button class="edit-btn" onclick="editContent(${category.id}, ${child.id})" style="font-size:10px; padding:1px 4px;">âœ</button>`;
                    html += ` <button class="edit-btn" onclick="deleteSubItem(${category.id}, ${child.id})" style="font-size:10px; padding:1px 4px; background:#ffebee;">âœ•</button>`;
                }
                
                html += '\n';
            });
            
            if (category.children.length === 0 && index !== siteData.length - 1) {
                html += '|\n';
            }
        });
        
        treeContent.innerHTML = html;
        localStorage.setItem('siteData', JSON.stringify(siteData));
    }
    
    // ğŸ‘ï¸ Ä°Ã§eriÄŸi GÃ¶rÃ¼ntÃ¼le
    function viewContent(categoryId, itemId) {
        event.preventDefault();
        
        const contentDisplay = document.getElementById('contentDisplay');
        const contentView = document.getElementById('contentView');
        
        if (itemId === null) {
            // Ana baÅŸlÄ±k iÃ§eriÄŸi
            const category = siteData.find(c => c.id === categoryId);
            contentDisplay.innerHTML = `<h3>${category.title}</h3>\n\n${category.content}`;
        } else {
            // Alt baÅŸlÄ±k iÃ§eriÄŸi
            const category = siteData.find(c => c.id === categoryId);
            const item = category.children.find(c => c.id === itemId);
            contentDisplay.innerHTML = `<h3>${item.title}</h3>\n\n${item.content}`;
        }
        
        contentView.style.display = 'block';
        contentView.scrollIntoView({ behavior: 'smooth' });
    }
    
    // ğŸ™ˆ Ä°Ã§erik GÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ Gizle
    function hideContentView() {
        document.getElementById('contentView').style.display = 'none';
    }
    
    // âœï¸ DÃ¼zenleme Modunu AÃ§/Kapat
    function toggleEditMode() {
        editMode = !editMode;
        document.querySelector('.edit-controls').firstElementChild.textContent = 
            editMode ? 'DÃ¼zenlemeyi Bitir' : 'DÃ¼zenleme Modu';
        renderTree();
    }
    
    // ğŸ“ Ä°Ã§erik DÃ¼zenle
    function editContent(categoryId, itemId) {
        currentEditingId = { categoryId, itemId };
        const modal = document.getElementById('editModal');
        const editTitle = document.getElementById('editTitle');
        const editContent = document.getElementById('editContent');
        
        if (itemId === null) {
            // Ana baÅŸlÄ±k dÃ¼zenle
            const category = siteData.find(c => c.id === categoryId);
            editTitle.value = category.title;
            editContent.value = category.content;
        } else {
            // Alt baÅŸlÄ±k dÃ¼zenle
            const category = siteData.find(c => c.id === categoryId);
            const item = category.children.find(c => c.id === itemId);
            editTitle.value = item.title;
            editContent.value = item.content;
        }
        
        modal.style.display = 'flex';
    }
    
    // ğŸ’¾ Ä°Ã§erik Kaydet
    function saveContent() {
        const editTitle = document.getElementById('editTitle');
        const editContent = document.getElementById('editContent');
        
        if (!editTitle.value.trim()) {
            alert('BaÅŸlÄ±k boÅŸ olamaz!');
            return;
        }
        
        const { categoryId, itemId } = currentEditingId;
        
        if (itemId === null) {
            // Ana baÅŸlÄ±k gÃ¼ncelle
            const category = siteData.find(c => c.id === categoryId);
            category.title = editTitle.value;
            category.content = editContent.value;
        } else {
            // Alt baÅŸlÄ±k gÃ¼ncelle
            const category = siteData.find(c => c.id === categoryId);
            const item = category.children.find(c => c.id === itemId);
            item.title = editTitle.value;
            item.content = editContent.value;
        }
        
        closeModal();
        renderTree();
        
        // EÄŸer iÃ§erik gÃ¶rÃ¼ntÃ¼leniyorsa gÃ¼ncelle
        const contentView = document.getElementById('contentView');
        if (contentView.style.display === 'block') {
            viewContent(categoryId, itemId);
        }
    }
    
    // ğŸ—‘ï¸ Ä°Ã§erik Sil
    function deleteContent() {
        if (!confirm('Bu Ã¶ÄŸeyi silmek istediÄŸinize emin misiniz?')) return;
        
        const { categoryId, itemId } = currentEditingId;
        
        if (itemId === null) {
            // Ana baÅŸlÄ±k sil
            if (siteData.length <= 1) {
                alert('En az bir ana baÅŸlÄ±k kalmalÄ±!');
                return;
            }
            siteData = siteData.filter(c => c.id !== categoryId);
        } else {
            // Alt baÅŸlÄ±k sil
            const category = siteData.find(c => c.id === categoryId);
            category.children = category.children.filter(c => c.id !== itemId);
        }
        
        closeModal();
        renderTree();
        hideContentView();
    }
    
    // âŒ ModalÄ± Kapat
    function closeModal() {
        document.getElementById('editModal').style.display = 'none';
        currentEditingId = null;
    }
    
    // â• Yeni Ana BaÅŸlÄ±k Ekle
    function addNewCategory() {
        const title = prompt('Yeni ana baÅŸlÄ±k adÄ±:');
        if (!title) return;
        
        const newId = siteData.length > 0 ? Math.max(...siteData.map(c => c.id)) + 1 : 1;
        siteData.push({
            id: newId,
            title: title + (title.endsWith('.html') ? '' : '.html'),
            content: 'Yeni iÃ§erik buraya yazÄ±lacak.',
            children: []
        });
        
        renderTree();
    }
    
    // â• Alt BaÅŸlÄ±k Ekle
    function addSubItem(categoryId) {
        const title = prompt('Yeni alt baÅŸlÄ±k adÄ±:');
        if (!title) return;
        
        const category = siteData.find(c => c.id === categoryId);
        const newId = category.children.length > 0 ? 
            Math.max(...category.children.map(c => c.id)) + 1 : 1;
        
        category.children.push({
            id: newId,
            title: title + (title.endsWith('.html') ? '' : '.html'),
            content: 'Yeni alt baÅŸlÄ±k iÃ§eriÄŸi buraya yazÄ±lacak.'
        });
        
        renderTree();
    }
    
    // ğŸ—‘ï¸ Ana BaÅŸlÄ±k Sil
    function deleteCategory(categoryId) {
        if (!confirm('Bu ana baÅŸlÄ±ÄŸÄ± ve tÃ¼m alt baÅŸlÄ±klarÄ±nÄ± silmek istediÄŸinize emin misiniz?')) return;
        
        if (siteData.length <= 1) {
            alert('En az bir ana baÅŸlÄ±k kalmalÄ±!');
            return;
        }
        
        siteData = siteData.filter(c => c.id !== categoryId);
        renderTree();
        hideContentView();
    }
    
    // ğŸ—‘ï¸ Alt BaÅŸlÄ±k Sil
    function deleteSubItem(categoryId, itemId) {
        if (!confirm('Bu alt baÅŸlÄ±ÄŸÄ± silmek istediÄŸinize emin misiniz?')) return;
        
        const category = siteData.find(c => c.id === categoryId);
        category.children = category.children.filter(c => c.id !== itemId);
        renderTree();
        
        // EÄŸer silinen iÃ§erik gÃ¶rÃ¼ntÃ¼leniyorsa gizle
        const contentView = document.getElementById('contentView');
        if (contentView.style.display === 'block') {
            const contentDisplay = document.getElementById('contentDisplay');
            if (contentDisplay.innerHTML.includes(document.querySelector(`[onclick*="${itemId}"]`).textContent)) {
                hideContentView();
            }
        }
    }
    
    // ğŸ“¥ Veriyi Ä°ndir
    function exportData() {
        const dataStr = JSON.stringify(siteData, null, 2);
        const blob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'site-verisi.json';
        a.click();
        URL.revokeObjectURL(url);
    }
    
    // ğŸ“¤ Veri YÃ¼kle
    function importData() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            
            reader.onload = function(event) {
                try {
                    const importedData = JSON.parse(event.target.result);
                    siteData = importedData;
                    renderTree();
                    alert('Veri baÅŸarÄ±yla yÃ¼klendi!');
                } catch (error) {
                    alert('GeÃ§ersiz veri dosyasÄ±!');
                }
            };
            
            reader.readAsText(file);
        };
        
        input.click();
    }
    
    // ğŸ“„ Yeni Ã–ÄŸe ModalÄ±nÄ± AÃ§
    function openNewItemModal() {
        document.getElementById('newItemModal').style.display = 'flex';
    }
    
    // âŒ Yeni Ã–ÄŸe ModalÄ±nÄ± Kapat
    function closeNewItemModal() {
        document.getElementById('newItemModal').style.display = 'none';
        document.getElementById('newItemTitle').value = '';
    }
    
    // ğŸ”„ Parent Select'i GÃ¼ncelle
    function toggleParentSelect() {
        const itemType = document.getElementById('itemType').value;
        const parentSelect = document.getElementById('parentCategory');
        
        if (itemType === 'subitem') {
            parentSelect.style.display = 'block';
            parentSelect.innerHTML = '';
            siteData.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.title;
                parentSelect.appendChild(option);
            });
        } else {
            parentSelect.style.display = 'none';
        }
    }
    
    // â• Yeni Ã–ÄŸe Ekle (Modal ile)
    function addItem() {
        const itemType = document.getElementById('itemType').value;
        const title = document.getElementById('newItemTitle').value.trim();
        
        if (!title) {
            alert('BaÅŸlÄ±k boÅŸ olamaz!');
            return;
        }
        
        if (itemType === 'category') {
            // Yeni ana baÅŸlÄ±k
            const newId = siteData.length > 0 ? Math.max(...siteData.map(c => c.id)) + 1 : 1;
            siteData.push({
                id: newId,
                title: title + (title.endsWith('.html') ? '' : '.html'),
                content: 'Yeni iÃ§erik buraya yazÄ±lacak.',
                children: []
            });
        } else {
            // Yeni alt baÅŸlÄ±k
            const parentId = parseInt(document.getElementById('parentCategory').value);
            const category = siteData.find(c => c.id === parentId);
            
            if (!category) {
                alert('LÃ¼tfen bir ana baÅŸlÄ±k seÃ§in!');
                return;
            }
            
            const newId = category.children.length > 0 ? 
                Math.max(...category.children.map(c => c.id)) + 1 : 1;
            
            category.children.push({
                id: newId,
                title: title + (title.endsWith('.html') ? '' : '.html'),
                content: 'Yeni alt baÅŸlÄ±k iÃ§eriÄŸi buraya yazÄ±lacak.'
            });
        }
        
        closeNewItemModal();
        renderTree();
    }
    
    // ğŸš€ Sayfa YÃ¼klendiÄŸinde
    window.onload = function() {
        renderTree();
        console.log('âœ… Site hazÄ±r!');
        console.log('ğŸ“ DÃ¼zenleme modunu aÃ§arak iÃ§erik ekleyip dÃ¼zenleyebilirsiniz.');
    };
</script>
</body>
</html>
