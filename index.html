<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>site</title>
    <style>
        body, .container, .tree, a { margin: 0; padding: 0; font-family: monospace; background: #0a0a0a; color: #e0e0e0; }
        .container { max-width: 800px; margin: 20px auto; padding: 0 20px; }
        .tree { white-space: pre; line-height: 1.3; font-size: 16px; }
        a { color: #64ffda; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .edit-btn { background: #1a1a1a; border: 1px solid #333; color: #e0e0e0; padding: 2px 6px; font-size: 11px; cursor: pointer; margin-left: 5px; }
        .edit-btn:hover { background: #2a2a2a; }
        #editControls { position: fixed; top: 10px; right: 10px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); align-items: center; justify-content: center; }
        .modal-content { background: #1a1a1a; padding: 20px; border: 1px solid #333; width: 90%; max-width: 500px; }
        .modal input, .modal textarea { width: 100%; background: #0a0a0a; color: #e0e0e0; border: 1px solid #333; padding: 8px; margin: 5px 0; font-family: monospace; }
        .modal textarea { height: 150px; }
    </style>
</head>
<body>
<div class="container">
    <div id="editControls">
        <button class="edit-btn" onclick="toggleEdit()">Düzenle</button>
    </div>
    
    <div class="tree" id="tree"></div>
    
    <div class="modal" id="modal">
        <div class="modal-content">
            <input type="text" id="editTitle" placeholder="Başlık">
            <textarea id="editContent" placeholder="İçerik"></textarea>
            <button class="edit-btn" onclick="save()">Kaydet</button>
            <button class="edit-btn" onclick="closeModal()">İptal</button>
        </div>
    </div>
</div>

<script>
let data = JSON.parse(localStorage.getItem('data')) || [
    {id:1, title:"ornek.html", content:"İlk içerik", children:[
        {id:11, title:"alt-1.html", content:"Alt içerik 1"},
        {id:12, title:"alt-2.html", content:"Alt içerik 2"}
    ]}
];

let editMode = false;
let editing = null;

function render() {
    let html = '';
    data.forEach(cat => {
        html += `|——<span onclick="view(${cat.id},null)">${cat.title}</span>`;
        if(editMode) html += `<button class="edit-btn" onclick="edit(${cat.id},null)">✎</button><button class="edit-btn" onclick="addSub(${cat.id})">+</button>`;
        html += '\n';
        cat.children.forEach(child => {
            html += `|  |——<span onclick="view(${cat.id},${child.id})">${child.title}</span>`;
            if(editMode) html += `<button class="edit-btn" onclick="edit(${cat.id},${child.id})">✎</button>`;
            html += '\n';
        });
    });
    document.getElementById('tree').innerHTML = html;
    localStorage.setItem('data', JSON.stringify(data));
}

function toggleEdit() {
    editMode = !editMode;
    document.querySelector('#editControls .edit-btn').textContent = editMode ? 'Kapat' : 'Düzenle';
    render();
}

function view(catId, itemId) {
    let item = itemId ? data.find(c=>c.id===catId).children.find(i=>i.id===itemId) : data.find(c=>c.id===catId);
    if(document.querySelector('.content')?.dataset.id == (itemId||catId)) {
        document.querySelector('.content')?.remove();
        return;
    }
    document.querySelector('.content')?.remove();
    let div = document.createElement('div');
    div.className = 'content';
    div.style.marginTop = '20px';
    div.style.padding = '15px';
    div.style.border = '1px solid #333';
    div.style.whiteSpace = 'pre-wrap';
    div.dataset.id = itemId||catId;
    div.innerHTML = `<h3>${item.title}</h3><p>${item.content}</p><button class="edit-btn" onclick="this.parentNode.remove()">Kapat</button>`;
    document.querySelector('.container').appendChild(div);
}

function edit(catId, itemId) {
    editing = {catId, itemId};
    let item = itemId ? data.find(c=>c.id===catId).children.find(i=>i.id===itemId) : data.find(c=>c.id===catId);
    document.getElementById('editTitle').value = item.title;
    document.getElementById('editContent').value = item.content;
    document.getElementById('modal').style.display = 'flex';
}

function save() {
    let title = document.getElementById('editTitle').value;
    let content = document.getElementById('editContent').value;
    if(!title) return;
    
    if(editing.itemId === null) {
        let cat = data.find(c=>c.id===editing.catId);
        cat.title = title;
        cat.content = content;
    } else {
        let cat = data.find(c=>c.id===editing.catId);
        let item = cat.children.find(i=>i.id===editing.itemId);
        item.title = title;
        item.content = content;
    }
    
    closeModal();
    render();
}

function addSub(catId) {
    let title = prompt('Alt başlık adı:');
    if(!title) return;
    let cat = data.find(c=>c.id===catId);
    let newId = cat.children.length ? Math.max(...cat.children.map(i=>i.id)) + 1 : 1;
    cat.children.push({id:newId, title:title + (title.endsWith('.html')?'':'.html'), content:'İçerik'});
    render();
}

function closeModal() {
    document.getElementById('modal').style.display = 'none';
}

render();
</script>
</body>
</html>
