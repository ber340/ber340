<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>manifesto</title>
    <style>
        body, .content-container, .header, .tree, .small, .sublink_small, .sublink_small:visited {
            margin: 0;
            padding: 0;
            background-color: white;
            color: black;
        }
        body, .header, .tree {
            font-family: monospace;
        }
        .content-container {
            max-width: 800px;
            margin-left: 1%;
            padding: 20px;
            word-wrap: break-word;
        }
        .header, .tree {
            white-space: pre;
            margin-top: 10px;
            margin-left: 1%;
        }
        .tree {
            line-height: 1.3;
            font-size: 16px;
        }
        .small, .sublink_small {
            font-size: 14px;
            text-decoration: none;
        }
        .sublink_small {
            color: black;
        }
        .sublink_small:visited {
            color: gray;
        }
        .sublink_small:hover {
            text-decoration: underline;
        }
        
        /* Kontroller */
        .edit-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 100;
        }
        .edit-btn {
            font-family: monospace;
            font-size: 12px;
            background: white;
            border: 1px solid #ccc;
            padding: 5px 10px;
            cursor: pointer;
        }
        
        /* Ä°Ã§erik gÃ¶rÃ¼nÃ¼mÃ¼ */
        .content-view {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 1px solid #ccc;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .close-btn {
            float: right;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        .content-body a {
            color: #0645ad;
            text-decoration: none;
        }
        .content-body a:hover {
            text-decoration: underline;
        }
        
        /* Mobil */
        @media (max-width: 600px) {
            .content-container {
                padding: 10px;
                margin-left: 0;
            }
            .tree {
                font-size: 14px;
                margin-left: 0;
            }
            .edit-controls {
                position: static;
                text-align: right;
                margin-bottom: 20px;
            }
            .content-view {
                width: 95%;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
<div class="content-container">
    <!-- Kontroller -->
    <div class="edit-controls">
        <button class="edit-btn" onclick="toggleEdit()">DÃ¼zenle</button>
        <button class="edit-btn" id="addBtn" style="display:none" onclick="addItem()">+</button>
    </div>

    <!-- AÄŸaÃ§ yapÄ±sÄ± -->
    <div class="tree" id="treeContent">
        <!-- Ä°Ã§erik buraya eklenecek -->
    </div>
    
    <!-- Ä°Ã§erik gÃ¶rÃ¼nÃ¼mÃ¼ -->
    <div class="content-view" id="contentView">
        <button class="close-btn" onclick="closeContent()">Ã—</button>
        <div id="contentBody"></div>
    </div>
</div>

<script>
// ğŸ“¦ Veriler
let items = JSON.parse(localStorage.getItem('manifestoData')) || [
    { id: 1, title: "ilk-baslik.html", content: "Bu ilk baÅŸlÄ±ÄŸÄ±n iÃ§eriÄŸi.\n\nDÃ¼zenleme modunu aÃ§arak yeni baÅŸlÄ±klar ekleyebilirsiniz." },
    { id: 2, title: "ornek-link.html", content: "Bu bir Ã¶rnek iÃ§eriktir.\n\nBaÄŸlantÄ± eklemek iÃ§in HTML kullanÄ±n: <a href='https://example.com'>Ã–rnek site</a>" }
];

let editMode = false;
let viewingId = null;

// ğŸŒ³ AÄŸaÃ§ yapÄ±sÄ±nÄ± oluÅŸtur
function renderTree() {
    let html = '';
    
    items.forEach((item, index) => {
        // BaÅŸlÄ±k satÄ±rÄ±
        html += `|â€”â€”<a href="#" onclick="viewContent(${item.id})" class="small">${item.title}</a>`;
        
        // DÃ¼zenleme butonlarÄ±
        if (editMode) {
            html += ` <button onclick="editItem(${item.id})" style="font-size:11px; border:1px solid #ccc; background:white; cursor:pointer">âœ</button>`;
            html += ` <button onclick="deleteItem(${item.id})" style="font-size:11px; border:1px solid #ccc; background:white; cursor:pointer">Ã—</button>`;
        }
        
        html += '\n';
        
        // Son Ã¶ÄŸe deÄŸilse Ã§izgi ekle
        if (index < items.length - 1) {
            html += '|\n';
        }
    });
    
    document.getElementById('treeContent').innerHTML = html;
    localStorage.setItem('manifestoData', JSON.stringify(items));
}

// ğŸ‘ï¸ Ä°Ã§eriÄŸi gÃ¶rÃ¼ntÃ¼le
function viewContent(id) {
    event.preventDefault();
    
    const item = items.find(i => i.id === id);
    if (!item) return;
    
    // AynÄ± iÃ§eriÄŸe tekrar tÄ±klandÄ±ysa kapat
    if (viewingId === id) {
        closeContent();
        return;
    }
    
    viewingId = id;
    document.getElementById('contentBody').innerHTML = item.content.replace(/\n/g, '<br>');
    document.getElementById('contentView').style.display = 'block';
}

// ğŸ™ˆ Ä°Ã§eriÄŸi kapat
function closeContent() {
    document.getElementById('contentView').style.display = 'none';
    viewingId = null;
}

// ğŸ”„ DÃ¼zenleme modu
function toggleEdit() {
    editMode = !editMode;
    document.getElementById('addBtn').style.display = editMode ? 'inline-block' : 'none';
    document.querySelector('.edit-controls .edit-btn').textContent = editMode ? 'GÃ¶rÃ¼ntÃ¼le' : 'DÃ¼zenle';
    renderTree();
}

// âœï¸ Ä°Ã§eriÄŸi dÃ¼zenle
function editItem(id) {
    const item = items.find(i => i.id === id);
    const newTitle = prompt('BaÅŸlÄ±k:', item.title);
    if (newTitle === null) return;
    
    const newContent = prompt('Ä°Ã§erik (HTML kullanabilirsiniz):', item.content);
    if (newContent === null) return;
    
    item.title = newTitle.trim();
    item.content = newContent;
    renderTree();
    
    // EÄŸer bu iÃ§erik aÃ§Ä±ksa gÃ¼ncelle
    if (viewingId === id) {
        document.getElementById('contentBody').innerHTML = item.content.replace(/\n/g, '<br>');
    }
}

// â• Yeni Ã¶ÄŸe ekle
function addItem() {
    const title = prompt('Yeni baÅŸlÄ±k adÄ±:');
    if (!title) return;
    
    const content = prompt('Ä°Ã§erik:');
    if (content === null) return;
    
    const newId = items.length ? Math.max(...items.map(i => i.id)) + 1 : 1;
    items.push({
        id: newId,
        title: title.endsWith('.html') ? title : title + '.html',
        content: content || 'Yeni iÃ§erik'
    });
    
    renderTree();
}

// ğŸ—‘ï¸ Ã–ÄŸe sil
function deleteItem(id) {
    if (items.length <= 1) {
        alert('En az bir baÅŸlÄ±k kalmalÄ±!');
        return;
    }
    
    if (!confirm('Bu baÅŸlÄ±ÄŸÄ± silmek istediÄŸinize emin misiniz?')) return;
    
    items = items.filter(i => i.id !== id);
    renderTree();
    
    // EÄŸer silinen iÃ§erik aÃ§Ä±ksa kapat
    if (viewingId === id) {
        closeContent();
    }
}

// ğŸš€ Sayfa yÃ¼klendiÄŸinde
renderTree();

// Modal dÄ±ÅŸÄ±na tÄ±klayÄ±nca kapat
document.getElementById('contentView').addEventListener('click', function(e) {
    if (e.target === this) {
        closeContent();
    }
});
</script>
</body>
</html>
